JUMP 4
# ---------- fonction EXP(nombre, exposant) ----------
# Renvoie résultat = nombre^exposant
#
# Places locales :
#   résultat -> -5
#   nombre -> -4
#   exposant -> -3
LABEL 0
    # résultat stocke la valeur de a^b à chaque étape
    # et contient la valeur nombre^exposant à la fin
    PUSHI 1 # résultat = 1
    STOREL -5

    LABEL 1 # while exposant > 0
        PUSHL -3 # exposant
        PUSHI 0
        SUP # if (exposant > 0)
        JUMPF 2

        # valeur_a^b *= nombre
        PUSHL 0
        PUSHL -4 # nombre
        MUL
        STOREL 0

        # exposant -= 1
        PUSHL -3
        PUSHI 1
        SUB
        STOREL -3

        JUMP 1

        LABEL 2
            # résultat = valeur_a^b
            PUSHL 0
            STOREL -5
            RETURN

LABEL 4
PUSHI 0 # résultat -> -5
PUSHI 2 # nombre -> -4
PUSHI 4 # exposant -> -3
CALL 0
POP # exposant
POP # nombre

WRITE # print(résultat)
POP # résultat
HALT


