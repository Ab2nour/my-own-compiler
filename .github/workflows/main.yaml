# On teste automatiquement
# le code ANTLR4.

name: CI
on:  push
jobs:
  test-code:
    name: Teste Calculette.g4
    runs-on: ubuntu-latest
        
    steps:    
    - uses: actions/checkout@v2
    
    - name: Test d'expressions
      run: |
            cd .
            
            # on récupère toutes les fonctions de functions.sh
            source tools/functions.sh


            # code
            python3 tests/launch_tests.py  # crée le fichier launch_tests.sh
            
            nb_tests=0
            nb_tests_faux=0
            
            source launch_tests.sh            

            affiche_bilan 
            
      shell: bash
